<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="src/main.css" rel="stylesheet" type="text/css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/default.min.css">
        <title>
            PTaaS: Docs
        </title>
    </head>
    <body>
        <div class="bg-light border-bottom p-15 d-flex justify-content-between align-items-center">
            <div class="h2">
                PTaaS <span class="text-orange">documents</span>
            </div>
            <div>
                <a class="x-a" href="https://github.com/ptaas-tool" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
                    </svg>
                </a>
            </div>
        </div>
        <div class="x-container x-floating-container border-bottom">
            <div class="p-15 border-end" style="overflow: scroll;">
                <ul>
                    <li>
                        <a href="#sec-installation">Installation</a>
                        <ul>
                            <li><a href="#sec-docker">Docker</a></li>
                            <li>
                                <a href="#sec-charts">Charts</a>
                                <ul>
                                    <li>Configs</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><a href="#sec-usage">Usage</a></li>
                    <li>
                        <a href="#sec-components">Components</a>
                        <ul>
                            <li>
                                <a href="#sec-base-api">Base-API</a>
                                <ul>
                                    <li>Database</li>
                                    <li>Scanner</li>
                                    <li>ML</li>
                                </ul>
                            </li>
                            <li><a href="#sec-gateway">Gateway</a></li>
                            <li>
                                <a href="#sec-ftp">FTP-Server</a>
                                <ul>
                                    <li>Object Storage</li>
                                    <li>Libatks</li>
                                </ul>
                            </li>
                            <li><a href="#dashboard">Dashboard</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="p-30" style="text-align: justify;">
                <p>
                    Welcome to <b>PTaaS</b> (short form of Penetration Testing as a Service) official document page. PTaaS is a service for performing automated penetration testings over cloud.
                    It is a network security application that reduces costs of a penetration testing. Also, it provides more observability over the testing process.
                    Our goal is to reduce penetration testing costs in a cloud environment. Also, we are looking forward to increase the process velocity and reduce the human errors.
                </p>
                <div id="sec-installation" class="h3">
                    Installation
                </div>
                <div class="mb-3">
                    In order to install this application, you can use docker or helm charts. Docker is useful when you want to install
                    the application on a bare-metal or on your local system. However, charts are being used to install the application
                    on a Kubernetes cluster.
                </div>
                <div id="sec-docker" class="h4">
                    Docker
                </div>
                <div class="mb-3">
                    For installing the application using Docker, first make sure that you have <b>docker & docker-compose</b> command lines
                    installed on your machine. You may check <a href="https://docs.docker.com/engine/install/" target="_blank">this</a> link to install these dependencies.
                    Then use the following script in order to download the project deployment files and start the application:
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
#!/bin/bash

git clone https://github.com/ptaas-tool/deployments
cd deployments

# deploy the application
./deploy.sh up ptaas
                    </code></pre>
                </div>
                <div id="sec-charts" class="h4">
                    Charts
                </div>
                <div class="mb-3">
                    In order to use <b>Helm Charts</b>, first install the following dependencies on your machine:<br /><br />
                    <ul>
                        <li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank">Kubectl</a></li>
                        <li><a href="https://helm.sh/docs/helm/helm_install/" target="_blank">Helm CLI</a></li>
                    </ul>
                    <br />
                    After that use the following script in order to start the application on a Kubernetes cluster.
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
#!/bin/bash

git clone https://github.com/ptaas-tool/deployments

# deploy the application
helm install ptaa ptaas
                    </code></pre>
                </div>
                <div class="h5">
                    Configs
                </div>
                <div class="mb-3">
                    Application configs are written into <b>YAML</b> format. There are two base config files for this application. The
                    base config and gatway configs which are as follow:
                    <pre class="bg-light px-3 my-3"><code class="language-yml bg-light">
core:
    port: 9090
    enable: true
    workers: 1
    secret: "#wercV89Qwerc09"
mysql:
    host: "mysql-container"
    port: 3306
    user: root
    pass: "mauFJcuf5dhRMQrjj"
    database: "ptaas"
    migrate: true
ai:
    enable: false
    method: "random"
    limit: 10
    factor: 7
scanner:
    enable: false
    defaults:
        - "2fa"
    command: "python3 scanner.py"
    flags:
        - "host"
        - "endpoints"
        - "type"
        - "protocol"
migrate:
    root: "admin"
    pass: "12345"
    enable: false
ftp:
    host: "http://ftp-server:9091"
    secret: "8bVc13329vn23"
    access: "nnvXiu%2234nvoo3n1i98n3v"
                    </code></pre>
                </div>
                <div id="sec-usage" class="h3">
                    Usage
                </div>
                <div class="mb-3">
                    Penetration testing as a service (PTaaS) is a form of cybersecurity service where organizations hire third-party security experts to conduct simulated attacks on their IT infrastructure, networks, applications, and other digital assets. The primary goal of penetration testing is to identify vulnerabilities and weaknesses in the organization's security defenses before malicious actors exploit them.
The main objective of PTaaS is to assess the security posture of an organization's digital assets by simulating real-world cyberattacks. This helps identify vulnerabilities and weaknesses that could be exploited by attackers. PTaaS can include various types of penetration testing, including network penetration testing, web application penetration testing, mobile application penetration testing, wireless network penetration testing, and social engineering testing. <br /><br />
Penetration testing typically follows a structured methodology that involves several phases, including reconnaissance, enumeration, vulnerability assessment, exploitation, and reporting. Security experts use a combination of automated tools and manual techniques to identify and exploit vulnerabilities. This approach ensures a thorough examination of the organization's security defenses.
PTaaS offers several benefits to organizations. It helps identify vulnerabilities proactively, allowing organizations to address them before they are exploited by malicious actors, thus reducing the risk of data breaches and cyberattacks. Additionally, many regulatory standards and industry best practices require organizations to conduct regular penetration testing to ensure compliance with security requirements. Furthermore, penetration testing provides valuable insights into the effectiveness of an organization's security defenses, allowing them to improve their security posture. <br /><br />
PTaaS can be offered through various engagement models, including one-time engagements, ongoing subscriptions, and customized engagements tailored to the organization's specific needs and requirements. Penetration testing results are typically documented in a detailed report that outlines the vulnerabilities discovered, the potential impact of these vulnerabilities, and recommendations for remediation. <br /><br />
Despite its benefits, PTaaS may face challenges such as cost considerations, resource constraints, and the need for skilled cybersecurity professionals to perform the testing effectively. However, penetration testing as a service remains a valuable cybersecurity offering that helps organizations identify and mitigate security risks to protect their digital assets from cyber threats.
                </div>
                <div id="sec-components" class="h3">
                    Components
                </div>
                <div id="sec-base-api" class="h4">
                    Base-API
                </div>
                <div class="mb-3">
                    This is PTaaS base api system. In this service we use scanner, ftp server, and ml components to
                    perform our penetration testing stages. In pkg/models directory we defined our base database modules
                    and system modules to be used in all other system components.<br /><br />
                    Base API docker image address:
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
docker pull amirhossein21/ptaas-tool:base-v0.X.X
                    </code></pre>
                    Setup base API in docker container with following command:
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
docker run -d \
    -v type=bind,source=$(pwd)/config.yml,dest=/app/config.yml
    -p 80:80 \
    amirhossein21/ptaas-tool:base-v0.X.X
                    </code></pre>
                </div>
                <div class="h5">
                    Database
                </div>
                <div class="mb-3">
                    Application uses the latest version of <b>MySQL</b>. If you want to migrate the modules, just set the following
                    configs in base-api config file:
                    <pre class="bg-light px-3 my-3"><code class="language-yml bg-light">
mysql:
    host: "mysql-container"
    port: 3306
    user: root
    pass: "mauFJcuf5dhRMQrjj"
    database: "ptaas"
    migrate: true
migrate:
    root: "admin"
    pass: "12345"
    enable: false
                    </code></pre>
                </div>
                <div class="h5">
                    Scanner
                </div>
                <div class="mb-3">
                    Open source tool to perform API security scan in PTaaS.
                    This scanner uses nmap in order to get some details about our target. In this app, we get system information, critical issues, system vulnerabilities, and system dependencies. After that we return a list of possible vulnerabilities that might be used in a penetrating testing for that target.
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
pip install -r requirements.txt
python scanner.py --host webmail.aut.ac.ir
                    </code></pre>
                    Output:
                    <pre class="bg-light px-3 my-3"><code class="language-json bg-light">
[
    {
        "vuln": "injection",
        "attacks": [ "sql injection", "graphql injection" ]
        "path": [
        "/docs/{doc-name}",
        "/docs?sort_by={sorting-field}",
        ],
        "host" : {
        "ip": "127.0.0.2",
        "port": 8080
        }
    }
]
                    </code></pre>
                </div>
                <div class="h5">
                    ML
                </div>
                <div class="mb-3">
                    Implementing a machine learning model in order to find the attacks that can be performed during a penetration testing by using analysis result data which consists of system vulnerabilities, bugs, and bad smells.
                    In order to execute the model to see its results use the following command:
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
jupyter nbconvert --execute ./notebook/analysis_data.ipynb
                    </code></pre>
                </div>
                <div id="sec-gateway" class="h4">
                    Gateway
                </div>
                <div class="mb-3">
                    Gateway is the PTaaS restful API for handling client http requests. This module handles the user interface logic in order to communicate with base-api and ftp-server. It is the system main gateway app.
                    Setup gateway service in docker container with following command:
                    <pre class="bg-light px-3 my-3"><code class="language-bash bg-light">
docker run -d \
    -v type=bind,source=$(pwd)/config.yaml,dest=/app/config.yaml \
    -p 80:80 \
    amirhossein21/ptaas-tool:gateway-v0.X.X
                    </code></pre>
                    Make sure to create config.yaml file with the following variable init:
                    <pre class="bg-light px-3 my-3"><code class="language-yaml bg-light">
http:
    port: 8080
    core: 'http://localhost:9090/api'
    core_secret: 'secret'
    dev_mode: true
jwt:
    private_key: 'super'
    expire_time: 180 # minute
mysql:
    host: 'localhost'
    port: 3306
    user: root
    pass: ''
    database: 'apt'
    migrate: false
ftp:
    host: 'http://localhost:9091'
    secret: 'secret'
    access: 'access'
                    </code></pre>
                </div>
                <div id="sec-ftp" class="h4">
                    FTP-Server
                </div>
                <div class="h5">
                    Object Storage
                </div>
                <div class="h5">
                    Libatks
                </div>
                <div id="sec-dashboard" class="h4">
                    Dashboard
                </div>
            </div>
        </div>
        <div class="bg-orange text-dark p-15" style="text-align: center;">
            all rights are reserved for the Amirkabir University of Technology <br />
            created by amirhnajafiz <br />
            2023-2024
        </div>
        <script src="src/script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    </body>
</html>
